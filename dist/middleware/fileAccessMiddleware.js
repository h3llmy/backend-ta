function a12_0x4a9c(){const _0x555afd=['fileName','_id','./storage/private/','\x20not\x20found','admin','populate','./storage/public/','orFail','params','949167MzMXwm','9eMIFTO','File\x20','1956732lEnIWM','107706zyRPAA','sendFile','productUrl','auth','8ZiPPsn','6LdNNhr','4099998lUgfdJ','includes','1973859hmCjdw','Forbidden','collections','existsSync','13402840BQWoOI','resolve','1966490bDmgmD','findOne','mimeType','length'];a12_0x4a9c=function(){return _0x555afd;};return a12_0x4a9c();}(function(_0x35d179,_0x351c0c){const _0x1c1011=a12_0x490d,_0x541a33=_0x35d179();while(!![]){try{const _0x15e731=-parseInt(_0x1c1011(0x80))/0x1*(parseInt(_0x1c1011(0x83))/0x2)+parseInt(_0x1c1011(0x6c))/0x3+parseInt(_0x1c1011(0x82))/0x4+-parseInt(_0x1c1011(0x72))/0x5*(-parseInt(_0x1c1011(0x69))/0x6)+parseInt(_0x1c1011(0x6a))/0x7+parseInt(_0x1c1011(0x87))/0x8*(parseInt(_0x1c1011(0x7f))/0x9)+-parseInt(_0x1c1011(0x70))/0xa;if(_0x15e731===_0x351c0c)break;else _0x541a33['push'](_0x541a33['shift']());}catch(_0x5901dd){_0x541a33['push'](_0x541a33['shift']());}}}(a12_0x4a9c,0x6347a));import a12_0x1060e9 from'fs';function a12_0x490d(_0x2ce145,_0xfcc5cb){const _0x4a9ced=a12_0x4a9c();return a12_0x490d=function(_0x490df2,_0x3857cb){_0x490df2=_0x490df2-0x69;let _0x4d93f3=_0x4a9ced[_0x490df2];return _0x4d93f3;},a12_0x490d(_0x2ce145,_0xfcc5cb);}import a12_0x41be36 from'../vendor/customError.js';import a12_0x33b68f from'path';import a12_0x12ddaf from'../model/userModel.js';export const publicFile=(_0x45f21d,_0x3098a9)=>{const _0x52e363=a12_0x490d,_0x2d7cbc=_0x52e363(0x7c)+_0x45f21d[_0x52e363(0x7e)][_0x52e363(0x74)]+'/'+_0x45f21d[_0x52e363(0x7e)][_0x52e363(0x76)];if(!a12_0x1060e9[_0x52e363(0x6f)](_0x2d7cbc))throw new a12_0x41be36(_0x52e363(0x81)+_0x45f21d['params'][_0x52e363(0x76)]+_0x52e363(0x79),0x194);_0x3098a9[_0x52e363(0x84)](a12_0x33b68f[_0x52e363(0x71)](_0x2d7cbc));};export const privateFile=async(_0x3b8287,_0x4d97fa)=>{const _0x204b0f=a12_0x490d,_0x5de5c2=_0x204b0f(0x78)+_0x3b8287[_0x204b0f(0x7e)][_0x204b0f(0x74)]+'/'+_0x3b8287[_0x204b0f(0x7e)][_0x204b0f(0x76)];if(!a12_0x1060e9['existsSync'](_0x5de5c2))throw new a12_0x41be36(_0x204b0f(0x81)+_0x3b8287['params']['fileName']+_0x204b0f(0x79),0x194);if(_0x3b8287[_0x204b0f(0x86)]['status']!==_0x204b0f(0x7a)){const _0x5b48ed=await a12_0x12ddaf[_0x204b0f(0x73)]({'_id':_0x3b8287[_0x204b0f(0x86)]?.[_0x204b0f(0x77)]})[_0x204b0f(0x7b)](_0x204b0f(0x6e))[_0x204b0f(0x7d)](new a12_0x41be36(_0x204b0f(0x6d),0x193));let _0x59ce41=![];for(let _0xe54ad7=0x0;_0xe54ad7<_0x5b48ed['collections'][_0x204b0f(0x75)];_0xe54ad7++){const _0x499380=_0x5b48ed[_0x204b0f(0x6e)][_0xe54ad7];if(_0x499380[_0x204b0f(0x85)][_0x204b0f(0x6b)]('private/'+_0x3b8287[_0x204b0f(0x7e)][_0x204b0f(0x74)]+'/'+_0x3b8287[_0x204b0f(0x7e)][_0x204b0f(0x76)])){_0x59ce41=!![];break;}}if(!_0x59ce41)throw new a12_0x41be36('Forbidden',0x193);}_0x4d97fa[_0x204b0f(0x84)](a12_0x33b68f[_0x204b0f(0x71)](_0x5de5c2));};