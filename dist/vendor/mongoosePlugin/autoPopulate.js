(function(_0x9186fe,_0x3112f5){const _0x252f53=a36_0x23b0,_0x93bfe7=_0x9186fe();while(!![]){try{const _0x279974=parseInt(_0x252f53(0xe5))/0x1*(-parseInt(_0x252f53(0xc0))/0x2)+-parseInt(_0x252f53(0xcd))/0x3*(parseInt(_0x252f53(0xe7))/0x4)+-parseInt(_0x252f53(0xc4))/0x5*(-parseInt(_0x252f53(0xd4))/0x6)+-parseInt(_0x252f53(0xdd))/0x7*(-parseInt(_0x252f53(0xc8))/0x8)+-parseInt(_0x252f53(0xd2))/0x9*(parseInt(_0x252f53(0xc9))/0xa)+-parseInt(_0x252f53(0xb4))/0xb*(-parseInt(_0x252f53(0xc7))/0xc)+-parseInt(_0x252f53(0xb1))/0xd;if(_0x279974===_0x3112f5)break;else _0x93bfe7['push'](_0x93bfe7['shift']());}catch(_0x5ea1cc){_0x93bfe7['push'](_0x93bfe7['shift']());}}}(a36_0x1cfe,0x67161));export default function autopopulatePlugin(_0x2108fe,_0x20b78b){const _0x3c0a0b=a36_0x23b0,_0xb98cd1=getPathsToPopulate(_0x2108fe);let _0x3d3240=()=>!![];if(_0x20b78b!=null&&(Array[_0x3c0a0b(0xaa)](_0x20b78b['functions'])||_0x20b78b[_0x3c0a0b(0xb6)]instanceof RegExp)){let _0x139aa2=_0x20b78b[_0x3c0a0b(0xb6)];Array[_0x3c0a0b(0xaa)](_0x139aa2)?(_0x139aa2=new Set(_0x139aa2),_0x3d3240=_0x1022ee=>_0x139aa2[_0x3c0a0b(0xe9)](_0x1022ee)):_0x3d3240=_0x3b7031=>_0x139aa2[_0x3c0a0b(0xd1)](_0x3b7031);}const _0x6845a6=function(_0x12063a){const _0x55197f=_0x3c0a0b,_0x4ea315=[];if(this[_0x55197f(0xd7)]&&this[_0x55197f(0xd7)]['lean']&&!this['_mongooseOptions'][_0x55197f(0xbb)][_0x55197f(0xcb)])return;const _0x2e7d56=this[_0x55197f(0xbd)]||{};if(_0x2e7d56['autopopulate']===![])return;_0x2e7d56['autopopulate']&&_0x2e7d56[_0x55197f(0xcb)][_0x55197f(0xe6)]&&(_0x2e7d56[_0x55197f(0xe6)]=_0x2e7d56[_0x55197f(0xcb)]['maxDepth']);const _0x1d8f6d=_0x2e7d56[_0x55197f(0xb3)]!=null?_0x2e7d56[_0x55197f(0xb3)]:0x0;if(_0x2e7d56[_0x55197f(0xe6)]>0x0&&_0x1d8f6d>=_0x2e7d56[_0x55197f(0xe6)])return;const _0xc4ba5e=_0xb98cd1[_0x55197f(0xc1)];for(let _0x5236dd=0x0;_0x5236dd<_0xc4ba5e;++_0x5236dd){_0xb98cd1[_0x5236dd][_0x55197f(0xbd)]=_0xb98cd1[_0x5236dd][_0x55197f(0xbd)]||{};if(typeof _0x12063a===_0x55197f(0xc2)&&!_0x12063a(_0xb98cd1[_0x5236dd][_0x55197f(0xbd)]))continue;_0xb98cd1[_0x5236dd][_0x55197f(0xbd)][_0x55197f(0xbd)]=_0xb98cd1[_0x5236dd]['options'][_0x55197f(0xbd)]||{};const _0x351903={'_depth':_0x1d8f6d+0x1};if(_0x2e7d56[_0x55197f(0xe6)])_0x351903[_0x55197f(0xe6)]=_0x2e7d56['maxDepth'];Object[_0x55197f(0xd5)](_0xb98cd1[_0x5236dd][_0x55197f(0xbd)][_0x55197f(0xbd)],_0x351903);const _0xb3319b=processOption['call'](this,_0xb98cd1[_0x5236dd][_0x55197f(0xcb)],_0xb98cd1[_0x5236dd][_0x55197f(0xbd)]);_0xb3319b&&(this[_0x55197f(0xd6)][_0x55197f(0xb9)]===_0x55197f(0xca)?this[_0x55197f(0xe2)](_0xb3319b):_0x4ea315[_0x55197f(0xe3)](_0xb3319b));}return _0x4ea315;};_0x3d3240('find')&&(_0x2108fe['pre'](_0x3c0a0b(0xab),function(){const _0x4d090d=_0x3c0a0b;return _0x6845a6[_0x4d090d(0xdf)](this);}),_0x2108fe[_0x3c0a0b(0xa9)]('find',function(_0x90b5e4){const _0x1cb5cf=_0x3c0a0b;return autopopulateDiscriminators[_0x1cb5cf(0xdf)](this,_0x90b5e4);})),_0x3d3240(_0x3c0a0b(0xbc))&&(_0x2108fe['pre'](_0x3c0a0b(0xbc),function(){const _0x551f47=_0x3c0a0b;return _0x6845a6[_0x551f47(0xdf)](this);}),_0x2108fe[_0x3c0a0b(0xa9)](_0x3c0a0b(0xbc),function(_0x202bb8){return autopopulateDiscriminators['call'](this,_0x202bb8);})),_0x3d3240(_0x3c0a0b(0xdb))&&(_0x2108fe[_0x3c0a0b(0xaf)](_0x3c0a0b(0xdb),function(){const _0x3da5d9=_0x3c0a0b;return _0x6845a6[_0x3da5d9(0xdf)](this);}),_0x2108fe['post'](_0x3c0a0b(0xdb),function(_0x4254d3){const _0x52fd07=_0x3c0a0b;return autopopulateDiscriminators[_0x52fd07(0xdf)](this,_0x4254d3);})),_0x3d3240(_0x3c0a0b(0xb8))&&_0x2108fe['post'](_0x3c0a0b(0xb8),function(){const _0x274be4=_0x3c0a0b;if(_0xb98cd1['length']===0x0)return Promise[_0x274be4(0xc3)]();if(typeof this[_0x274be4(0xd8)]===_0x274be4(0xc2)&&this[_0x274be4(0xce)])return Promise[_0x274be4(0xc3)]();const _0x36b095=_0x6845a6[_0x274be4(0xdf)](this,_0x391780=>{const _0x58a6ce=_0x274be4,_0xbb3d7=this['populated'](_0x391780[_0x58a6ce(0xbf)]);if(Array[_0x58a6ce(0xaa)](_0xbb3d7)){const _0x54b790=this[_0x58a6ce(0xb5)](_0x391780[_0x58a6ce(0xbf)]);return _0x54b790==null||_0xbb3d7[_0x58a6ce(0xc1)]!==_0x54b790[_0x58a6ce(0xc1)]||_0xbb3d7[_0x58a6ce(0xc5)](_0x581f87=>_0x581f87==null);}return!![];});return this[_0x274be4(0xe2)](_0x36b095);});}function a36_0x1cfe(){const _0x14000b=['save','name','ref','lean','findOne','options','values','path','2tfDrmj','length','function','resolve','672145dkqTVs','some','forEach','4596SegYSA','8064oWslcz','30SwuDNH','Query','autopopulate','filter','18UYKgyS','$isSubdocument','refPath','set','test','696573qUgNwC','pathsToPopulate','6edUMFz','assign','constructor','_mongooseOptions','ownerDocument','schema','pop','findOneAndUpdate','discriminators','1687EqJmmo','model','call','virtuals','type','populate','push','docs','299881YZADTS','maxDepth','64JBpDlQ','map','has','all','keys','post','isArray','find','$isMongooseArray','delete','join','pre','populated','61425IxqXEk','$embeddedSchemaType','_depth','16709OgjKYH','get','functions','eachPath'];a36_0x1cfe=function(){return _0x14000b;};return a36_0x1cfe();}function autopopulateDiscriminators(_0x506466){const _0x4448c7=a36_0x23b0;if(_0x506466==null)return;if(this[_0x4448c7(0xd7)]!=null&&this[_0x4448c7(0xd7)]['lean'])return;!Array[_0x4448c7(0xaa)](_0x506466)&&(_0x506466=[_0x506466]);const _0x4eab47=new Map();for(const _0x3214cb of _0x506466){if(_0x3214cb['constructor']['baseModelName']!=null){const _0x2db734=_0x3214cb[_0x4448c7(0xd6)],_0x2af8b9=_0x2db734['modelName'];if(!_0x4eab47['has'](_0x2af8b9)){const _0x46812f=getPathsToPopulate(_0x2db734[_0x4448c7(0xd9)])[_0x4448c7(0xcc)](_0x2e4a41=>!_0x3214cb[_0x4448c7(0xb0)](_0x2e4a41[_0x4448c7(0xbd)]['path']));_0x4eab47[_0x4448c7(0xd0)](_0x2af8b9,{'model':_0x2db734,'docs':[],'pathsToPopulate':_0x46812f});}const _0xae720=_0x4eab47['get'](_0x2af8b9);_0xae720['docs'][_0x4448c7(0xe3)](_0x3214cb);}}return Promise[_0x4448c7(0xea)](Array['from'](_0x4eab47[_0x4448c7(0xbe)]())[_0x4448c7(0xe8)](_0x109e55=>{const _0xa28f68=_0x4448c7,_0x3969d0=_0x109e55[_0xa28f68(0xd3)]['map'](_0x302036=>processOption[_0xa28f68(0xdf)](this,_0x302036[_0xa28f68(0xcb)],_0x302036[_0xa28f68(0xbd)]))[_0xa28f68(0xcc)](_0x395507=>!!_0x395507);return _0x109e55[_0xa28f68(0xde)]['populate'](_0x109e55[_0xa28f68(0xe4)],_0x3969d0);}));}function a36_0x23b0(_0x3cc6d0,_0xf82655){const _0x1cfe4a=a36_0x1cfe();return a36_0x23b0=function(_0x23b01f,_0x43223e){_0x23b01f=_0x23b01f-0xa9;let _0x166b91=_0x1cfe4a[_0x23b01f];return _0x166b91;},a36_0x23b0(_0x3cc6d0,_0xf82655);}function getPathsToPopulate(_0x3369ae){const _0x24cba3=[],_0x3bb496=new WeakMap();return eachPathRecursive(_0x3369ae,function(_0x164b3d,_0x2e02f0){const _0x34ca9a=a36_0x23b0;let _0x55fb30;if(_0x2e02f0[_0x34ca9a(0xbd)]&&_0x2e02f0[_0x34ca9a(0xbd)][_0x34ca9a(0xcb)])_0x55fb30=_0x2e02f0['options']['autopopulate'],_0x24cba3[_0x34ca9a(0xe3)]({'options':defaultOptions(_0x164b3d,_0x2e02f0[_0x34ca9a(0xbd)]),'autopopulate':_0x55fb30});else _0x2e02f0[_0x34ca9a(0xbd)]&&_0x2e02f0[_0x34ca9a(0xbd)][_0x34ca9a(0xe1)]&&_0x2e02f0[_0x34ca9a(0xbd)][_0x34ca9a(0xe1)][0x0]&&_0x2e02f0[_0x34ca9a(0xbd)][_0x34ca9a(0xe1)][0x0]['autopopulate']&&(_0x55fb30=_0x2e02f0[_0x34ca9a(0xbd)][_0x34ca9a(0xe1)][0x0][_0x34ca9a(0xcb)],_0x24cba3[_0x34ca9a(0xe3)]({'options':defaultOptions(_0x164b3d,_0x2e02f0[_0x34ca9a(0xbd)][_0x34ca9a(0xe1)][0x0]),'autopopulate':_0x55fb30}));},null,_0x3bb496),_0x24cba3;}function defaultOptions(_0x537ae4,_0x47982a){const _0x43e20d=a36_0x23b0,_0x5918e6={'path':_0x537ae4,'options':{'maxDepth':0xa}};return _0x47982a[_0x43e20d(0xba)]!=null&&(_0x5918e6[_0x43e20d(0xde)]=_0x47982a[_0x43e20d(0xba)],_0x5918e6[_0x43e20d(0xba)]=_0x47982a[_0x43e20d(0xba)]),_0x47982a[_0x43e20d(0xcf)]!=null&&(_0x5918e6[_0x43e20d(0xcf)]=_0x47982a[_0x43e20d(0xcf)]),_0x5918e6;}function processOption(_0x3641ef,_0x357d3f){const _0x41be5c=a36_0x23b0;switch(typeof _0x3641ef){case'function':return handleFunction['call'](this,_0x3641ef,_0x357d3f);case'object':return handleObject[_0x41be5c(0xdf)](this,_0x3641ef,_0x357d3f);default:return handlePrimitive[_0x41be5c(0xdf)](this,_0x3641ef,_0x357d3f);}}function handlePrimitive(_0x1e9ebf,_0xd6169f){if(_0x1e9ebf)return _0xd6169f;}function handleObject(_0xb946ac,_0x1b0861){const _0x260f9d=a36_0x23b0;return _0xb946ac[_0x260f9d(0xe6)]!=null&&(_0x1b0861[_0x260f9d(0xbd)]=_0x1b0861[_0x260f9d(0xbd)]||{},_0x1b0861['options'][_0x260f9d(0xe6)]=_0xb946ac[_0x260f9d(0xe6)],delete _0xb946ac[_0x260f9d(0xe6)]),_0x1b0861=Object[_0x260f9d(0xd5)]({},_0x1b0861,_0xb946ac),_0x1b0861;}function handleFunction(_0x5b8c6f,_0x510cee){const _0x3a0097=a36_0x23b0,_0x335dc=_0x5b8c6f[_0x3a0097(0xdf)](this,_0x510cee);return processOption[_0x3a0097(0xdf)](this,_0x335dc,_0x510cee);}function eachPathRecursive(_0x3755a0,_0x3fe1bc,_0xd2c559,_0x206dfe){const _0x1e2522=a36_0x23b0;if(_0x206dfe[_0x1e2522(0xe9)](_0x3755a0))return;!_0xd2c559&&(_0xd2c559=[]),_0x206dfe[_0x1e2522(0xd0)](_0x3755a0,!![]),_0x3755a0[_0x1e2522(0xb7)](function(_0x9c559,_0x4b7761){const _0x14b4f0=_0x1e2522;_0xd2c559[_0x14b4f0(0xe3)](_0x9c559);if(_0x4b7761[_0x14b4f0(0xd9)]){eachPathRecursive(_0x4b7761['schema'],_0x3fe1bc,_0xd2c559,_0x206dfe);if(_0x4b7761[_0x14b4f0(0xd9)][_0x14b4f0(0xdc)]!=null)for(const _0xf4b119 of Object['keys'](_0x4b7761[_0x14b4f0(0xd9)][_0x14b4f0(0xdc)])){eachPathRecursive(_0x4b7761['schema'][_0x14b4f0(0xdc)][_0xf4b119],_0x3fe1bc,_0xd2c559);}}else{if(_0x4b7761['$isMongooseArray']&&_0x4b7761['$embeddedSchemaType'][_0x14b4f0(0xac)]){while(_0x4b7761!=null&&_0x4b7761['$isMongooseArray']&&!_0x4b7761['$isMongooseDocumentArray']){_0x4b7761=_0x4b7761[_0x14b4f0(0xb2)];}if(_0x4b7761!=null&&_0x4b7761['$isMongooseDocumentArray']){eachPathRecursive(_0x4b7761['schema'],_0x3fe1bc,_0xd2c559,_0x206dfe);if(_0x4b7761[_0x14b4f0(0xd9)][_0x14b4f0(0xdc)]!=null)for(const _0x41d697 of Object[_0x14b4f0(0xeb)](_0x4b7761[_0x14b4f0(0xd9)][_0x14b4f0(0xdc)])){eachPathRecursive(_0x4b7761[_0x14b4f0(0xd9)]['discriminators'][_0x41d697],_0x3fe1bc,_0xd2c559,_0x206dfe);}}}else _0x3fe1bc(_0xd2c559[_0x14b4f0(0xae)]('.'),_0x4b7761);}_0xd2c559[_0x14b4f0(0xda)]();}),_0x206dfe[_0x1e2522(0xad)](_0x3755a0),_0x3755a0[_0x1e2522(0xe0)]&&Object[_0x1e2522(0xeb)](_0x3755a0['virtuals'])[_0x1e2522(0xc6)](function(_0x4a7249){const _0x1f32a8=_0x1e2522;_0xd2c559[_0x1f32a8(0xe3)](_0x4a7249),_0x3fe1bc(_0xd2c559[_0x1f32a8(0xae)]('.'),_0x3755a0['virtuals'][_0x4a7249]),_0xd2c559[_0x1f32a8(0xda)]();});}